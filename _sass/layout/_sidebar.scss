@use '../abstracts/variables' as v;
@use '../abstracts/mixins' as mx;
@use '../abstracts/breakpoints' as bp;
@use '../abstracts/placeholders';

$btn-border-width: 3px;
$btn-mb: 0.5rem;
$sidebar-display: 'sidebar-display'; /* the attribute for sidebar display */

#sidebar {
  @include mx.pl-pr(0);

  position: fixed;
  top: 0;
  left: 0;
  height: 100%;
  overflow-y: auto;
  width: v.$sidebar-width;
  background: var(--sidebar-bg);
  border-right: 1px solid var(--sidebar-border-color);

  /* Hide scrollbar for IE, Edge and Firefox */
  -ms-overflow-style: none; /* IE and Edge */
  scrollbar-width: none; /* Firefox */

  /* Hide scrollbar for Chrome, Safari and Opera */
  &::-webkit-scrollbar {
    display: none;
  }

  @include bp.lt(bp.get(lg)) {
    @include mx.slide;

    transform: translateX(-#{v.$sidebar-width}); /* hide */
    -webkit-transform: translateX(-#{v.$sidebar-width});

    [#{$sidebar-display}] & {
      transform: translateX(0);
    }
  }

  @include bp.xxxl {
    width: v.$sidebar-width-large;
  }

  %sidebar-link-hover {
    &:hover {
      color: var(--sidebar-active-color);
    }
  }

  a {
    @extend %sidebar-links;
  }

  #avatar {
    display: block;
    width: 6.5rem;
    height: 6.5rem;
    overflow: hidden;
    box-shadow: rgb(255, 250, 241, 0.1) 0 0 0 10.5px; /* â‰ˆ var(--sidebar-hover-bg) */
    transform: translateZ(0); /* fixed the zoom in Safari */

    @include bp.sm {
      width: 83.33%;
      height: auto;
    }

    img {
      transition: transform 0.5s;
      width: 100%;
      height: auto;

      &:hover {
        transform: scale(1.2);
      }
    }
  }

  .profile-wrapper {
    @include mx.mt-mb(2.5rem);
    @extend %clickable-transition;

    padding-left: 2.5rem;
    padding-right: 2.5rem;
    width: 100%;
	display: flex;
	flex-direction: column;
	align-items: center;
	text-align: center;

    @include bp.lg {
      margin-top: 3rem;
    }

    @include bp.xxxl {
      margin-top: 3.5rem;
      margin-bottom: 2.5rem;
      // padding-left: 3.5rem;
    }
  }

  .site-title {
    @extend %clickable-transition;
    @extend %sidebar-link-hover;

    font-family: Permanent Marker;
    font-weight: 400;
    font-size: 1.75rem;
    line-height: 1.2;
    letter-spacing: 0.25px;
    margin-top: 1.25rem;
    width: fit-content;
    color: var(--site-title-color);
  }

  .site-subtitle {
    font-size: 95%;
    color: var(--site-subtitle-color);
    margin-top: 0.25rem;
    word-spacing: 1px;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
  }

  ul {
    margin-bottom: 2rem;

    li.nav-item {
      opacity: 0.9;
      width: 100%;

      @include mx.pl-pr(1.5rem);

      @include bp.xxxl {
        @include mx.pl-pr(2.75rem);
      }

      a.nav-link {
        @include mx.pt-pb(0.6rem);

        display: flex;
        align-items: center;
        border-radius: 0.75rem;
        font-weight: 600;

        &:hover {
          background-color: var(--sidebar-hover-bg);
        }

        i {
          font-size: 95%;
          opacity: 0.8;
          margin-right: 1.5rem;
        }

        span {
          font-size: 90%;
          letter-spacing: 0.2px;
        }
      }

      &.active {
        .nav-link {
          color: var(--sidebar-active-color);
          background-color: var(--sidebar-hover-bg);

          span {
            opacity: 1;
          }
        }
      }

      &:not(:first-child) {
        margin-top: 0.25rem;
      }
    }
  }

  .sidebar-bottom {
    padding-left: 2rem;
    padding-right: 2rem;
    margin-bottom: 1.5rem;
	display: flex;
	justify-content: center;
	gap: 0.5rem;
	width: 100%;

    @include bp.xxxl {
      // padding-left: 2.75rem;
      margin-bottom: 1.75rem;
    }

    $btn-size: 1.75rem;

    %button {
      width: $btn-size;
      height: $btn-size;
      margin-bottom: $btn-mb; // multi line gap
      border-radius: 50%;
      color: var(--sidebar-btn-color);
      background-color: var(--sidebar-btn-bg);
      text-align: center;
      display: flex;
      align-items: center;
      justify-content: center;

      &:not(:focus-visible) {
        box-shadow: var(--sidebar-border-color) 0 0 0 1px;
      }

      &:hover {
        background-color: var(--sidebar-hover-bg);
      }
    }

    a {
      @extend %button;
      @extend %sidebar-link-hover;
      @extend %clickable-transition;

      &:not(:last-child) {
        margin-right: v.$sb-btn-gap;

        @include bp.xxxl {
          margin-right: v.$sb-btn-gap-lg;
        }
      }
    }

    i {
      line-height: $btn-size;
    }

    #mode-toggle {
      @extend %button;
      @extend %sidebar-links;
      @extend %sidebar-link-hover;
    }

    .icon-border {
      @extend %no-cursor;
      @include mx.ml-mr(calc((v.$sb-btn-gap - $btn-border-width) / 2));

      background-color: var(--sidebar-btn-color);
      content: '';
      width: $btn-border-width;
      height: $btn-border-width;
      border-radius: 50%;
      margin-bottom: $btn-mb;

      @include bp.xxxl {
        @include mx.ml-mr(calc((v.$sb-btn-gap-lg - $btn-border-width) / 2));
      }
    }
  } /* .sidebar-bottom */

  clip-path: polygon(
	0 0,
	97.77% 0.0%,
	97.33% 0.5%, 96.90% 1.0%, 96.49% 1.5%, 96.12% 2.0%, 95.79% 2.5%, 95.51% 3.0%, 95.30% 3.5%, 95.15% 4.0%, 95.07% 4.5%, 95.07% 5.0%, 95.13% 5.5%, 95.27% 6.0%, 95.47% 6.5%, 95.73% 7.0%, 96.03% 7.5%, 96.38% 8.0%, 96.75% 8.5%, 97.15% 9.0%, 97.55% 9.5%, 97.95% 10.0%,
	98.33% 10.5%, 98.68% 11.0%, 99.00% 11.5%, 99.28% 12.0%, 99.50% 12.5%, 99.67% 13.0%, 99.77% 13.5%, 99.82% 14.0%, 99.80% 14.5%, 99.71% 15.0%, 99.57% 15.5%, 99.37% 16.0%, 99.13% 16.5%, 98.84% 17.0%, 98.53% 17.5%, 98.18% 18.0%, 97.82% 18.5%, 97.46% 19.0%, 97.10% 19.5%, 96.75% 20.0%,
	96.43% 20.5%, 96.14% 21.0%, 95.88% 21.5%, 95.67% 22.0%, 95.50% 22.5%, 95.39% 23.0%, 95.33% 23.5%, 95.32% 24.0%, 95.37% 24.5%, 95.47% 25.0%, 95.62% 25.5%, 95.82% 26.0%, 96.05% 26.5%, 96.31% 27.0%, 96.60% 27.5%, 96.91% 28.0%, 97.24% 28.5%, 97.56% 29.0%, 97.88% 29.5%, 98.19% 30.0%,
	98.47% 30.5%, 98.74% 31.0%, 98.97% 31.5%, 99.17% 32.0%, 99.32% 32.5%, 99.44% 33.0%, 99.51% 33.5%, 99.53% 34.0%, 99.51% 34.5%, 99.44% 35.0%, 99.34% 35.5%, 99.19% 36.0%, 99.01% 36.5%, 98.80% 37.0%, 98.56% 37.5%, 98.30% 38.0%, 98.03% 38.5%, 97.75% 39.0%, 97.47% 39.5%, 97.20% 40.0%,
	96.93% 40.5%, 96.67% 41.0%, 96.44% 41.5%, 96.23% 42.0%, 96.05% 42.5%, 95.90% 43.0%, 95.78% 43.5%, 95.70% 44.0%, 95.66% 44.5%, 95.65% 45.0%, 95.67% 45.5%, 95.73% 46.0%, 95.83% 46.5%, 95.95% 47.0%, 96.10% 47.5%, 96.28% 48.0%, 96.47% 48.5%, 96.68% 49.0%, 96.91% 49.5%, 97.14% 50.0%,
	97.37% 50.5%, 97.61% 51.0%, 97.83% 51.5%, 98.05% 52.0%, 98.26% 52.5%, 98.45% 53.0%, 98.62% 53.5%, 98.77% 54.0%, 98.90% 54.5%, 99.00% 55.0%, 99.07% 55.5%, 99.12% 56.0%, 99.14% 56.5%, 99.14% 57.0%, 99.11% 57.5%, 99.05% 58.0%, 98.97% 58.5%, 98.87% 59.0%, 98.75% 59.5%, 98.61% 60.0%,
	98.46% 60.5%, 98.30% 61.0%, 98.12% 61.5%, 97.95% 62.0%, 97.76% 62.5%, 97.58% 63.0%, 97.40% 63.5%, 97.23% 64.0%, 97.06% 64.5%, 96.90% 65.0%, 96.75% 65.5%, 96.62% 66.0%, 96.50% 66.5%, 96.40% 67.0%, 96.31% 67.5%, 96.24% 68.0%, 96.18% 68.5%, 96.15% 69.0%, 96.13% 69.5%, 96.13% 70.0%,
	96.15% 70.5%, 96.18% 71.0%, 96.23% 71.5%, 96.29% 72.0%, 96.36% 72.5%, 96.44% 73.0%, 96.54% 73.5%, 96.64% 74.0%, 96.75% 74.5%, 96.86% 75.0%, 96.98% 75.5%, 97.10% 76.0%, 97.22% 76.5%, 97.34% 77.0%, 97.46% 77.5%, 97.58% 78.0%, 97.69% 78.5%, 97.79% 79.0%, 97.89% 79.5%, 97.98% 80.0%,
	98.07% 80.5%, 98.14% 81.0%, 98.21% 81.5%, 98.27% 82.0%, 98.32% 82.5%, 98.36% 83.0%, 98.40% 83.5%, 98.42% 84.0%, 98.43% 84.5%, 98.44% 85.0%, 98.44% 85.5%, 98.43% 86.0%, 98.42% 86.5%, 98.40% 87.0%, 98.37% 87.5%, 98.34% 88.0%, 98.30% 88.5%, 98.26% 89.0%, 98.22% 89.5%, 98.18% 90.0%,
	98.13% 90.5%, 98.08% 91.0%, 98.03% 91.5%, 97.98% 92.0%, 97.94% 92.5%, 97.89% 93.0%, 97.84% 93.5%, 97.80% 94.0%, 97.75% 94.5%, 97.71% 95.0%, 97.68% 95.5%, 97.64% 96.0%, 97.61% 96.5%, 97.58% 97.0%, 97.56% 97.5%, 97.54% 98.0%, 97.52% 98.5%, 97.51% 99.0%, 97.50% 99.5%, 97.50% 100.0%,
	0 100%
  );
  // animation: wave 2s ease-in-out infinite;
} /* #sidebar */

@keyframes wave {
  0%, 100% {
    clip-path: polygon(
	0 0,
	97.77% 0.0%,
	97.33% 0.5%, 96.90% 1.0%, 96.49% 1.5%, 96.12% 2.0%, 95.79% 2.5%, 95.51% 3.0%, 95.30% 3.5%, 95.15% 4.0%, 95.07% 4.5%, 95.07% 5.0%, 95.13% 5.5%, 95.27% 6.0%, 95.47% 6.5%, 95.73% 7.0%, 96.03% 7.5%, 96.38% 8.0%, 96.75% 8.5%, 97.15% 9.0%, 97.55% 9.5%, 97.95% 10.0%,
	98.33% 10.5%, 98.68% 11.0%, 99.00% 11.5%, 99.28% 12.0%, 99.50% 12.5%, 99.67% 13.0%, 99.77% 13.5%, 99.82% 14.0%, 99.80% 14.5%, 99.71% 15.0%, 99.57% 15.5%, 99.37% 16.0%, 99.13% 16.5%, 98.84% 17.0%, 98.53% 17.5%, 98.18% 18.0%, 97.82% 18.5%, 97.46% 19.0%, 97.10% 19.5%, 96.75% 20.0%,
	96.43% 20.5%, 96.14% 21.0%, 95.88% 21.5%, 95.67% 22.0%, 95.50% 22.5%, 95.39% 23.0%, 95.33% 23.5%, 95.32% 24.0%, 95.37% 24.5%, 95.47% 25.0%, 95.62% 25.5%, 95.82% 26.0%, 96.05% 26.5%, 96.31% 27.0%, 96.60% 27.5%, 96.91% 28.0%, 97.24% 28.5%, 97.56% 29.0%, 97.88% 29.5%, 98.19% 30.0%,
	98.47% 30.5%, 98.74% 31.0%, 98.97% 31.5%, 99.17% 32.0%, 99.32% 32.5%, 99.44% 33.0%, 99.51% 33.5%, 99.53% 34.0%, 99.51% 34.5%, 99.44% 35.0%, 99.34% 35.5%, 99.19% 36.0%, 99.01% 36.5%, 98.80% 37.0%, 98.56% 37.5%, 98.30% 38.0%, 98.03% 38.5%, 97.75% 39.0%, 97.47% 39.5%, 97.20% 40.0%,
	96.93% 40.5%, 96.67% 41.0%, 96.44% 41.5%, 96.23% 42.0%, 96.05% 42.5%, 95.90% 43.0%, 95.78% 43.5%, 95.70% 44.0%, 95.66% 44.5%, 95.65% 45.0%, 95.67% 45.5%, 95.73% 46.0%, 95.83% 46.5%, 95.95% 47.0%, 96.10% 47.5%, 96.28% 48.0%, 96.47% 48.5%, 96.68% 49.0%, 96.91% 49.5%, 97.14% 50.0%,
	97.37% 50.5%, 97.61% 51.0%, 97.83% 51.5%, 98.05% 52.0%, 98.26% 52.5%, 98.45% 53.0%, 98.62% 53.5%, 98.77% 54.0%, 98.90% 54.5%, 99.00% 55.0%, 99.07% 55.5%, 99.12% 56.0%, 99.14% 56.5%, 99.14% 57.0%, 99.11% 57.5%, 99.05% 58.0%, 98.97% 58.5%, 98.87% 59.0%, 98.75% 59.5%, 98.61% 60.0%,
	98.46% 60.5%, 98.30% 61.0%, 98.12% 61.5%, 97.95% 62.0%, 97.76% 62.5%, 97.58% 63.0%, 97.40% 63.5%, 97.23% 64.0%, 97.06% 64.5%, 96.90% 65.0%, 96.75% 65.5%, 96.62% 66.0%, 96.50% 66.5%, 96.40% 67.0%, 96.31% 67.5%, 96.24% 68.0%, 96.18% 68.5%, 96.15% 69.0%, 96.13% 69.5%, 96.13% 70.0%,
	96.15% 70.5%, 96.18% 71.0%, 96.23% 71.5%, 96.29% 72.0%, 96.36% 72.5%, 96.44% 73.0%, 96.54% 73.5%, 96.64% 74.0%, 96.75% 74.5%, 96.86% 75.0%, 96.98% 75.5%, 97.10% 76.0%, 97.22% 76.5%, 97.34% 77.0%, 97.46% 77.5%, 97.58% 78.0%, 97.69% 78.5%, 97.79% 79.0%, 97.89% 79.5%, 97.98% 80.0%,
	98.07% 80.5%, 98.14% 81.0%, 98.21% 81.5%, 98.27% 82.0%, 98.32% 82.5%, 98.36% 83.0%, 98.40% 83.5%, 98.42% 84.0%, 98.43% 84.5%, 98.44% 85.0%, 98.44% 85.5%, 98.43% 86.0%, 98.42% 86.5%, 98.40% 87.0%, 98.37% 87.5%, 98.34% 88.0%, 98.30% 88.5%, 98.26% 89.0%, 98.22% 89.5%, 98.18% 90.0%,
	98.13% 90.5%, 98.08% 91.0%, 98.03% 91.5%, 97.98% 92.0%, 97.94% 92.5%, 97.89% 93.0%, 97.84% 93.5%, 97.80% 94.0%, 97.75% 94.5%, 97.71% 95.0%, 97.68% 95.5%, 97.64% 96.0%, 97.61% 96.5%, 97.58% 97.0%, 97.56% 97.5%, 97.54% 98.0%, 97.52% 98.5%, 97.51% 99.0%, 97.50% 99.5%, 97.50% 100.0%,
	0 100%
    );
  }	
  50% {
    clip-path: polygon(
      0 0,
      100.00% 0.0%,
      99.94% 0.5%, 99.78% 1.0%, 99.53% 1.5%, 99.20% 2.0%, 98.80% 2.5%, 98.36% 3.0%, 97.88% 3.5%, 97.39% 4.0%, 96.91% 4.5%, 96.46% 5.0%, 96.05% 5.5%, 95.69% 6.0%, 95.42% 6.5%, 95.22% 7.0%, 95.12% 7.5%, 95.11% 8.0%, 95.19% 8.5%, 95.36% 9.0%, 95.61% 9.5%, 95.93% 10.0%,
      96.30% 10.5%, 96.72% 11.0%, 97.17% 11.5%, 97.63% 12.0%, 98.07% 12.5%, 98.50% 13.0%, 98.88% 13.5%, 99.21% 14.0%, 99.47% 14.5%, 99.66% 15.0%, 99.77% 15.5%, 99.79% 16.0%, 99.73% 16.5%, 99.59% 17.0%, 99.37% 17.5%, 99.09% 18.0%, 98.76% 18.5%, 98.38% 19.0%, 97.97% 19.5%, 97.55% 20.0%,
      97.13% 20.5%, 96.73% 21.0%, 96.36% 21.5%, 96.03% 22.0%, 95.76% 22.5%, 95.54% 23.0%, 95.40% 23.5%, 95.33% 24.0%, 95.34% 24.5%, 95.42% 25.0%, 95.57% 25.5%, 95.78% 26.0%, 96.05% 26.5%, 96.37% 27.0%, 96.72% 27.5%, 97.09% 28.0%, 97.48% 28.5%, 97.86% 29.0%, 98.23% 29.5%, 98.57% 30.0%,
      98.87% 30.5%, 99.12% 31.0%, 99.32% 31.5%, 99.46% 32.0%, 99.54% 32.5%, 99.54% 33.0%, 99.49% 33.5%, 99.37% 34.0%, 99.19% 34.5%, 98.97% 35.0%, 98.69% 35.5%, 98.39% 36.0%, 98.06% 36.5%, 97.71% 37.0%, 97.37% 37.5%, 97.03% 38.0%, 96.70% 38.5%, 96.41% 39.0%, 96.15% 39.5%, 95.94% 40.0%,
      95.77% 40.5%, 95.66% 41.0%, 95.60% 41.5%, 95.60% 42.0%, 95.65% 42.5%, 95.76% 43.0%, 95.92% 43.5%, 96.12% 44.0%, 96.36% 44.5%, 96.63% 45.0%, 96.92% 45.5%, 97.22% 46.0%, 97.53% 46.5%, 97.83% 47.0%, 98.12% 47.5%, 98.39% 48.0%, 98.64% 48.5%, 98.84% 49.0%, 99.01% 49.5%, 99.14% 50.0%,
      99.21% 50.5%, 99.25% 51.0%, 99.23% 51.5%, 99.17% 52.0%, 99.07% 52.5%, 98.92% 53.0%, 98.74% 53.5%, 98.53% 54.0%, 98.30% 54.5%, 98.05% 55.0%, 97.79% 55.5%, 97.52% 56.0%, 97.26% 56.5%, 97.01% 57.0%, 96.77% 57.5%, 96.56% 58.0%, 96.37% 58.5%, 96.21% 59.0%, 96.09% 59.5%, 96.00% 60.0%,
      95.95% 60.5%, 95.94% 61.0%, 95.96% 61.5%, 96.03% 62.0%, 96.12% 62.5%, 96.25% 63.0%, 96.40% 63.5%, 96.58% 64.0%, 96.77% 64.5%, 96.98% 65.0%, 97.19% 65.5%, 97.41% 66.0%, 97.63% 66.5%, 97.84% 67.0%, 98.04% 67.5%, 98.22% 68.0%, 98.39% 68.5%, 98.53% 69.0%, 98.64% 69.5%, 98.73% 70.0%,
      98.80% 70.5%, 98.83% 71.0%, 98.83% 71.5%, 98.81% 72.0%, 98.76% 72.5%, 98.69% 73.0%, 98.59% 73.5%, 98.48% 74.0%, 98.34% 74.5%, 98.20% 75.0%, 98.04% 75.5%, 97.87% 76.0%, 97.71% 76.5%, 97.54% 77.0%, 97.38% 77.5%, 97.22% 78.0%, 97.07% 78.5%, 96.94% 79.0%, 96.82% 79.5%, 96.71% 80.0%,
      96.62% 80.5%, 96.55% 81.0%, 96.50% 81.5%, 96.47% 82.0%, 96.46% 82.5%, 96.47% 83.0%, 96.49% 83.5%, 96.54% 84.0%, 96.59% 84.5%, 96.66% 85.0%, 96.74% 85.5%, 96.84% 86.0%, 96.93% 86.5%, 97.04% 87.0%, 97.15% 87.5%, 97.25% 88.0%, 97.36% 88.5%, 97.47% 89.0%, 97.57% 89.5%, 97.66% 90.0%,
      97.75% 90.5%, 97.82% 91.0%, 97.89% 91.5%, 97.95% 92.0%, 97.99% 92.5%, 98.03% 93.0%, 98.05% 93.5%, 98.06% 94.0%, 98.06% 94.5%, 98.05% 95.0%, 98.03% 95.5%, 98.00% 96.0%, 97.96% 96.5%, 97.92% 97.0%, 97.87% 97.5%, 97.81% 98.0%, 97.75% 98.5%, 97.69% 99.0%, 97.62% 99.5%, 97.50% 100.0%,
	  0 100%
    );
  }
}

[#{$sidebar-display}] {
  #main-wrapper {
    @include bp.lt(bp.get(lg)) {
      transform: translateX(v.$sidebar-width);
    }
  }
}

// -----------------------------------------------------------------------------
// 01-Jan-2026: The following code was used to generate animation keyframes:
// -----------------------------------------------------------------------------
/*
	printf("      ");
	for (double y = 100.0; y >= 0.0; y -= 0.5)
	{
		double x = 97.5 - 2.5 * pow(y / 100.0, 0.5) * std::cos(Math_PI * pow(y, 1.39) / 75.0 + 2.5 * Math_PI);

		printf("%.2f%% %.1f%%,%s", x, 100.0 - y, y == 10.0 * int{y / 10.0} ? "\n      " : " ");
	}
	printf("\n\n\n");

	printf("      ");
	for (double y = 100.0; y >= 0.0; y -= 0.5)
	{
		double x = 97.5 + 2.5 * pow(y / 100.0, 0.5) * std::cos(Math_PI * pow(y + 25.0, 1.42) / 75.0 + 2.5 * Math_PI);

		printf("%.2f%% %.1f%%,%s", x, 100.0 - y, y == 10.0 * int{y / 10.0} ? "\n      " : " ");
	}
	printf("\n\n\n");
*/
// -----------------------------------------------------------------------------